{% extends "base.html" %}

{% block title %}Tambah Kegiatan Rehabilitasi - {{ patient.nama }}{% endblock %}

{% block content %}
    <div class="page-header">
        <a href="{{ url_for('patient_detail', patient_id=patient.id) }}" class="back-link">&larr; Kembali ke Detail Pasien</a>
        <h1>Tambah Kegiatan Rehabilitasi</h1>
    </div>

    <form method="POST" action="{{ url_for('add_activity', patient_id=patient.id) }}" class="form-card">
        <div class="form-group">
            <label for="program_name">Nama Program:</label>
            <input type="text" id="program_name" name="program_name" placeholder="Contoh: Program Rehabilitasi Minggu ke Dua" required>
        </div>

        <div class="form-group">
            <label for="terapist_name">Nama Terapis:</label>
            <input type="text" id="terapist_name" name="terapist_name" value="{{ username }}" readonly>
        </div>

        <div class="form-group">
            <label for="execution_date">Tanggal Pelaksanaan:</label>
            <input type="date" id="execution_date" name="execution_date" required>
        </div>

        <div class="form-group">
            <label>List Gerakan:</label>
            <ul class="movement-list-display">
                {% if selected_movements %}
                    {% for movement in selected_movements %}
                        <li>{{ movement.name }} {% if movement.count and movement.unit %}({{ movement.count }} {{ movement.unit }}){% endif %}</li>
                    {% endfor %}
                {% else %}
                    <li>Belum ada gerakan yang dipilih.</li>
                {% endif %}
            </ul>
            <a href="{{ url_for('select_movements', patient_id=patient.id) }}" class="button secondary add-movement-button">+ Pilih gerakan</a>
        </div>

        <button type="submit" class="button primary submit-program-button">Simpan Program</button>
    </form>
{% endblock %}
